{"ast":null,"code":"import React,{useRef,useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import'../styles/Login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[users,setUsers]=useState([]);const[isSignup,setIsSignup]=useState(false);const[loading,setLoading]=useState(true);const email=useRef();const pass=useRef();const name=useRef();const image=useRef();const navigate=useNavigate();// Load users from JSON file\nuseEffect(()=>{fetch('/users.json').then(res=>res.json()).then(data=>{setUsers(data.users);setLoading(false);}).catch(err=>{console.error(\"Error loading users:\",err);setLoading(false);});},[]);// Save users to localStorage (since we can't modify JSON directly from frontend)\nconst saveUsers=updatedUsers=>{localStorage.setItem('appUsers',JSON.stringify(updatedUsers));setUsers(updatedUsers);};// Get users from localStorage or initial state\nconst getUsers=()=>{const saved=localStorage.getItem('appUsers');return saved?JSON.parse(saved):users;};function handleLogin(e){e.preventDefault();const username=email.current.value;const password=pass.current.value;if(username===\"\"||password===\"\"){window.alert(\"Please enter credentials\");return;}const allUsers=getUsers();const user=allUsers.find(u=>u.username===username&&u.password===password);if(user){// Store logged in user info\nlocalStorage.setItem('loggedInUser',JSON.stringify(user));navigate(\"/home\");}else{alert(\"Invalid username or password\");}}function handleSignup(e){e.preventDefault();const username=email.current.value;const password=pass.current.value;const fullName=name.current.value;const userImage=image.current.value;if(username===\"\"||password===\"\"||fullName===\"\"){window.alert(\"Please fill all fields\");return;}const allUsers=getUsers();// Check if user already exists\nif(allUsers.find(u=>u.username===username)){alert(\"Username already exists\");return;}// Create new user\nconst newUser={id:allUsers.length+1,name:fullName,username:username,password:password,email:username,image:userImage||\"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.1.0&auto=format&fit=crop&w=500&q=60\"};const updatedUsers=[...allUsers,newUser];saveUsers(updatedUsers);alert(\"Account created successfully! Please login.\");setIsSignup(false);email.current.value=\"\";pass.current.value=\"\";name.current.value=\"\";image.current.value=\"\";}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"video\",{autoPlay:true,muted:true,loop:true,className:\"bg-video\",children:/*#__PURE__*/_jsx(\"source\",{src:\"https://www.pexels.com/download/video/853800/\",type:\"video/mp4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"overlay\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:isSignup?handleSignup:handleLogin,children:[/*#__PURE__*/_jsx(\"h1\",{children:isSignup?\"Create Account\":\"Welcome Back\"}),isSignup&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full Name\",ref:name}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username / Email\",ref:email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",ref:pass}),isSignup&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Image URL (optional)\",ref:image}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isSignup?\"Sign Up\":\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"toggle-form\",children:[isSignup?\"Already have an account? \":\"Don't have an account? \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsSignup(!isSignup),className:\"toggle-btn\",children:isSignup?\"Login\":\"Sign Up\"})]})]})]});}export default Login;","map":{"version":3,"names":["React","useRef","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","users","setUsers","isSignup","setIsSignup","loading","setLoading","email","pass","name","image","navigate","fetch","then","res","json","data","catch","err","console","error","saveUsers","updatedUsers","localStorage","setItem","JSON","stringify","getUsers","saved","getItem","parse","handleLogin","e","preventDefault","username","current","value","password","window","alert","allUsers","user","find","u","handleSignup","fullName","userImage","newUser","id","length","className","children","autoPlay","muted","loop","src","type","onSubmit","placeholder","ref","onClick"],"sources":["C:/Users/ASUS/OneDrive/Desktop/react/project1/src/components/Login.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport '../styles/Login.css';\r\n\r\nfunction Login() {\r\n  const [users, setUsers] = useState([]);\r\n  const [isSignup, setIsSignup] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  const email = useRef();\r\n  const pass = useRef();\r\n  const name = useRef();\r\n  const image = useRef();\r\n  \r\n  const navigate = useNavigate();\r\n\r\n  // Load users from JSON file\r\n  useEffect(() => {\r\n    fetch('/users.json')\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setUsers(data.users);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Error loading users:\", err);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  // Save users to localStorage (since we can't modify JSON directly from frontend)\r\n  const saveUsers = (updatedUsers) => {\r\n    localStorage.setItem('appUsers', JSON.stringify(updatedUsers));\r\n    setUsers(updatedUsers);\r\n  };\r\n\r\n  // Get users from localStorage or initial state\r\n  const getUsers = () => {\r\n    const saved = localStorage.getItem('appUsers');\r\n    return saved ? JSON.parse(saved) : users;\r\n  };\r\n\r\n  function handleLogin(e) {\r\n    e.preventDefault();\r\n    const username = email.current.value;\r\n    const password = pass.current.value;\r\n\r\n    if (username === \"\" || password === \"\") {\r\n      window.alert(\"Please enter credentials\");\r\n      return;\r\n    }\r\n\r\n    const allUsers = getUsers();\r\n    const user = allUsers.find(u => u.username === username && u.password === password);\r\n\r\n    if (user) {\r\n      // Store logged in user info\r\n      localStorage.setItem('loggedInUser', JSON.stringify(user));\r\n      navigate(\"/home\");\r\n    } else {\r\n      alert(\"Invalid username or password\");\r\n    }\r\n  }\r\n\r\n  function handleSignup(e) {\r\n    e.preventDefault();\r\n    const username = email.current.value;\r\n    const password = pass.current.value;\r\n    const fullName = name.current.value;\r\n    const userImage = image.current.value;\r\n\r\n    if (username === \"\" || password === \"\" || fullName === \"\") {\r\n      window.alert(\"Please fill all fields\");\r\n      return;\r\n    }\r\n\r\n    const allUsers = getUsers();\r\n    \r\n    // Check if user already exists\r\n    if (allUsers.find(u => u.username === username)) {\r\n      alert(\"Username already exists\");\r\n      return;\r\n    }\r\n\r\n    // Create new user\r\n    const newUser = {\r\n      id: allUsers.length + 1,\r\n      name: fullName,\r\n      username: username,\r\n      password: password,\r\n      email: username,\r\n      image: userImage || \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.1.0&auto=format&fit=crop&w=500&q=60\"\r\n    };\r\n\r\n    const updatedUsers = [...allUsers, newUser];\r\n    saveUsers(updatedUsers);\r\n    \r\n    alert(\"Account created successfully! Please login.\");\r\n    setIsSignup(false);\r\n    email.current.value = \"\";\r\n    pass.current.value = \"\";\r\n    name.current.value = \"\";\r\n    image.current.value = \"\";\r\n  }\r\n\r\n  if (loading) {\r\n    return <div className=\"login-container\"><p>Loading...</p></div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <video autoPlay muted loop className=\"bg-video\">\r\n        <source src=\"https://www.pexels.com/download/video/853800/\" type=\"video/mp4\" />\r\n      </video>\r\n      <div className=\"overlay\"></div>\r\n\r\n      <form className=\"login-form\" onSubmit={isSignup ? handleSignup : handleLogin}>\r\n        <h1>{isSignup ? \"Create Account\" : \"Welcome Back\"}</h1>\r\n        \r\n        {isSignup && (\r\n          <input \r\n            type=\"text\" \r\n            placeholder=\"Full Name\" \r\n            ref={name}\r\n          />\r\n        )}\r\n        \r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"Username / Email\" \r\n          ref={email}\r\n        />\r\n        \r\n        <input \r\n          type=\"password\" \r\n          placeholder=\"Password\" \r\n          ref={pass}\r\n        />\r\n\r\n        {isSignup && (\r\n          <input \r\n            type=\"text\" \r\n            placeholder=\"Image URL (optional)\" \r\n            ref={image}\r\n          />\r\n        )}\r\n        \r\n        <button type=\"submit\">\r\n          {isSignup ? \"Sign Up\" : \"Login\"}\r\n        </button>\r\n\r\n        <p className=\"toggle-form\">\r\n          {isSignup ? \"Already have an account? \" : \"Don't have an account? \"}\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setIsSignup(!isSignup)}\r\n            className=\"toggle-btn\"\r\n          >\r\n            {isSignup ? \"Login\" : \"Sign Up\"}\r\n          </button>\r\n        </p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}